{{! Request for New Software Form }}
<h1>Request for New Software</h1>
<form id="softwareRequestForm">
  <div id="softwareRequestFields">
    <!-- Dynamic fields will be rendered here -->
  </div>
  <button type="submit">Submit</button>
  <button type="button" id="resetSoftwareRequestForm">Reset</button>
</form>
<script>
  fetch('/assets/request-forms.json')
    .then(res => res.json())
    .then(data => {
      const formId = '4959420488607'; // Software request form ID
      const fields = data[formId]?.fields || [];
      const fieldsContainer = document.getElementById('softwareRequestFields');
      fieldsContainer.innerHTML = fields.map(field => {
        return `<label>${field.label}<input name=\"${field.name}\" type=\"${field.type || 'text'}\" /></label>`;
      }).join('');
    });

  document.getElementById('softwareRequestForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
    fetch('/api/submit-request', {
      method: 'POST',
      body: JSON.stringify(Object.fromEntries(formData)),
      headers: { 'Content-Type': 'application/json' }
    }).then(res => {
      if (res.ok) alert('Request submitted!');
      else alert('Submission failed.');
    });
  });

  document.getElementById('resetSoftwareRequestForm').addEventListener('click', function() {
    document.getElementById('softwareRequestForm').reset();
  });
</script>
