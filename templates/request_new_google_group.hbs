{{! Request New Google Group Form }}
<h1>Request New Google Group</h1>
<form id="googleGroupRequestForm">
  <div id="googleGroupRequestFields">
    <!-- Dynamic fields will be rendered here -->
  </div>
  <button type="submit">Submit</button>
  <button type="button" id="resetGoogleGroupRequestForm">Reset</button>
</form>
<script>
  fetch('/assets/request-forms.json')
    .then(res => res.json())
    .then(data => {
      const formId = '4959424971167'; // Google Group request form ID
      const fields = data[formId]?.fields || [];
      const fieldsContainer = document.getElementById('googleGroupRequestFields');
      fieldsContainer.innerHTML = fields.map(field => {
        return `<label>${field.label}<input name=\"${field.name}\" type=\"${field.type || 'text'}\" /></label>`;
      }).join('');
    });

  document.getElementById('googleGroupRequestForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
    fetch('/api/submit-request', {
      method: 'POST',
      body: JSON.stringify(Object.fromEntries(formData)),
      headers: { 'Content-Type': 'application/json' }
    }).then(res => {
      if (res.ok) alert('Request submitted!');
      else alert('Submission failed.');
    });
  });

  document.getElementById('resetGoogleGroupRequestForm').addEventListener('click', function() {
    document.getElementById('googleGroupRequestForm').reset();
  });
</script>
